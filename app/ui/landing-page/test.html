const [height, setHeight] = useState(95);
const [lastScrollTop, setLastScrollTop] = useState(0);
const [isSmallScreen, setIsSmallScreen] = useState(false);

useEffect(() => {
  const handleResize = () => {
    const smallScreen = window.matchMedia("(max-width: 640px)").matches;
    setIsSmallScreen(smallScreen);
    setHeight(smallScreen ? 48 : 95); // Adjust default height
  };

  window.addEventListener("resize", handleResize);
  handleResize(); // Run on component mount

  return () => window.removeEventListener("resize", handleResize);
}, []);

useEffect(() => {
  const handleScroll = () => {
    const scrollTop = window.scrollY;
    const shrinkStart = 50;
    const shrinkEnd = 300;
    const maxHeight = isSmallScreen ? 48 : 95;
    const minHeight = isSmallScreen ? 48 : maxHeight * 0.65;

    if (scrollTop < lastScrollTop) {
      setHeight(maxHeight);
    } else if (scrollTop >= shrinkEnd) {
      setHeight(minHeight);
    } else if (scrollTop >= shrinkStart) {
      const heightValue = maxHeight -  ((scrollTop - shrinkStart) / (shrinkEnd - shrinkStart)) * 33.25
      setHeight(heightValue)
    }
    setLastScrollTop(scrollTop);
  };

  window.addEventListener("scroll", handleScroll);

  return () => {
    window.removeEventListener("scroll", handleScroll);
  };
}, [lastScrollTop, isSmallScreen]);